{"ast":null,"code":"import initialState from '../reducers/initState';\nexport var REQUEST_POSTS_LIST = 'REQUEST_POSTS_LIST';\nexport var REQUEST_SINGLE_POST = 'REQUEST_SINGLE_POST';\nexport var RECEIVE_POSTS_LIST = 'RECEIVE_POSTS_LIST';\nexport var RECEIVE_SINGLE_POST = 'RECEIVE_SINGLE_POST';\nexport var RECEIVE_ERROR = 'RECEIVE_ERROR';\nexport var SET_ROUTE = 'SET_ROUTE';\nexport function requestPostsList(url) {\n  return {\n    type: REQUEST_POSTS_LIST,\n    url: url\n  };\n}\nexport function setRoute(params) {\n  return {\n    type: SET_ROUTE,\n    action: params.action || false,\n    url: params.url ? decodeURIComponent(params.url) : false\n  };\n}\nexport function requestPost(url) {\n  return {\n    type: REQUEST_SINGLE_POST,\n    url: url\n  };\n}\nexport function receivePostsList(url, posts) {\n  return {\n    type: RECEIVE_POSTS_LIST,\n    url: url,\n    posts: posts,\n    date: Date.now()\n  };\n}\nexport function receiveError(url, id, data) {\n  return {\n    type: RECEIVE_ERROR,\n    url: url,\n    id: id,\n    post: data\n  };\n}\nexport function receivePost(url, post) {\n  return {\n    type: RECEIVE_SINGLE_POST,\n    url: url,\n    post: post,\n    date: Date.now()\n  };\n}\nexport function fetchPostsList(dispatch, url) {\n  dispatch(requestPostsList(url));\n  return function (dispatch) {\n    return fetch('admin-ajax.php?action=parsing_get_list&url=' + encodeURIComponent(url), {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (json, error) {\n      if (!error) {\n        dispatch(receivePostsList(url, json));\n      } else {\n        console.error(error);\n      }\n    });\n  };\n}\nexport function parsePost(dispatch, url, id) {\n  dispatch(requestPost(url));\n  return function (dispatch) {\n    fetch('admin-ajax.php?action=parsing_api&url=' + encodeURIComponent(url), {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (json, error) {\n      error && console.error(error);\n\n      if (!json.error) {\n        json.data._id = id;\n        dispatch(receivePost(url, json));\n      } else {\n        dispatch(receiveError(url, id, json));\n      }\n    });\n  };\n}","map":{"version":3,"sources":["/var/www/html/news-parser/src/actions/action.js"],"names":["initialState","REQUEST_POSTS_LIST","REQUEST_SINGLE_POST","RECEIVE_POSTS_LIST","RECEIVE_SINGLE_POST","RECEIVE_ERROR","SET_ROUTE","requestPostsList","url","type","setRoute","params","action","decodeURIComponent","requestPost","receivePostsList","posts","date","Date","now","receiveError","id","data","post","receivePost","fetchPostsList","dispatch","fetch","encodeURIComponent","method","headers","then","response","json","error","console","parsePost","_id"],"mappings":"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","sourcesContent":["import initialState from '../reducers/initState';\n\n\nexport const REQUEST_POSTS_LIST='REQUEST_POSTS_LIST';\nexport const REQUEST_SINGLE_POST='REQUEST_SINGLE_POST';\nexport const RECEIVE_POSTS_LIST='RECEIVE_POSTS_LIST';\nexport const RECEIVE_SINGLE_POST='RECEIVE_SINGLE_POST';\nexport const RECEIVE_ERROR='RECEIVE_ERROR';\nexport const SET_ROUTE='SET_ROUTE';\n\nexport function requestPostsList (url){\n    return {\n        type:REQUEST_POSTS_LIST,\n        url:url\n    }\n}\nexport function setRoute(params){\n    return {\n        type:SET_ROUTE,\n        action:params.action||false,\n        url:params.url?decodeURIComponent(params.url):false\n    }\n}\nexport function requestPost (url) {\n    return {\n        type:REQUEST_SINGLE_POST,\n        url:url\n    }\n}\nexport function receivePostsList (url,posts) {\n    return {\n        type:RECEIVE_POSTS_LIST,\n        url:url,\n        posts:posts,\n        date:Date.now()\n    }\n}\nexport function receiveError(url,id,data){\n    return{\n        type:RECEIVE_ERROR,\n        url:url,\n        id:id,\n        post:data\n    }\n}\nexport function receivePost(url,post){\n    return {\n        type:RECEIVE_SINGLE_POST,\n        url:url,\n        post,\n        date:Date.now()\n    }\n}\n\nexport function fetchPostsList(dispatch,url){\n    dispatch(requestPostsList(url))\n    return dispatch=>{\n        return fetch('admin-ajax.php?action=parsing_get_list&url='+encodeURIComponent(url),\n        {method: 'POST',\n         headers: {\n           'Accept': 'application/json',\n           'Content-Type': 'application/json'\n         }\n        })\n        .then(response=>response.json())\n        .then((json,error)=>{\n            if(!error){\n            dispatch(receivePostsList (url,json))\n            }else{\n                console.error(error);\n            }\n        })\n    }\n}\nexport function parsePost(dispatch,url,id){\n    dispatch(requestPost(url));\n    return dispatch=>{fetch ('admin-ajax.php?action=parsing_api&url='+encodeURIComponent(url),\n    {method: 'POST',\n     headers: {\n       'Accept': 'application/json',\n       'Content-Type': 'application/json'\n     }\n    })\n    .then(response=>response.json())\n    .then((json,error)=>{\n        error&&console.error(error);\n        if(!json.error){\n            json.data._id=id;\n            dispatch(receivePost(url,json));\n        }else{\n            dispatch(receiveError(url,id,json));\n        }\n    })}\n}\n"]},"metadata":{},"sourceType":"module"}